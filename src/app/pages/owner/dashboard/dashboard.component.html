<div class="dashboard-wrapper">
  
  <!-- Animated Background Elements -->
  <div class="background-shapes">
    <span class="shape shape-1"></span>
    <span class="shape shape-2"></span>
    <span class="shape shape-3"></span>
  </div>

  <div class="dashboard-container">
    
    <!-- Dashboard Header -->
    <div class="dashboard-header">
      <div class="header-content">
        <h2 class="dashboard-title">Salon Dashboard</h2>
        <p class="dashboard-subtitle">Welcome back! Here's what's happening today</p>
      </div>
      <button class="refresh-btn" (click)="loadDashboard()" [disabled]="loading">
        <span class="refresh-icon" [class.spinning]="loading">üîÑ</span>
        <span>Refresh</span>
      </button>
    </div>

    <!-- Summary Cards -->
    <div class="stats-grid">
      
      <!-- Today's Bookings Card -->
      <div class="stat-card booking-card">
        <div class="stat-icon">
          <span>üìÖ</span>
        </div>
        <div class="stat-content">
          <h3 class="stat-label">Today's Bookings</h3>
          <p class="stat-value" *ngIf="!loading">{{ stats.todayBookings }}</p>
          <p class="stat-value skeleton" *ngIf="loading">---</p>
          
        </div>
        <div class="stat-decoration"></div>
      </div>

      <!-- Upcoming Bookings Card -->
      <div class="stat-card upcoming-card">
        <div class="stat-icon">
          <span>‚è∞</span>
        </div>
        <div class="stat-content">
          <h3 class="stat-label">Upcoming</h3>
          <p class="stat-value" *ngIf="!loading">{{ stats.upcoming }}</p>
          <p class="stat-value skeleton" *ngIf="loading">---</p>
          
        </div>
        <div class="stat-decoration"></div>
      </div>

      <!-- Total Services Card -->
      <div class="stat-card services-card">
        <div class="stat-icon">
          <span>üíá‚Äç‚ôÄÔ∏è</span>
        </div>
        <div class="stat-content">
          <h3 class="stat-label">Total Services</h3>
          <p class="stat-value" *ngIf="!loading">{{ stats.services }}</p>
          <p class="stat-value skeleton" *ngIf="loading">---</p>
          
        </div>
        <div class="stat-decoration"></div>
      </div>

      <!-- Total Locations Card -->
      <div class="stat-card locations-card">
        <div class="stat-icon">
          <span>üìç</span>
        </div>
        <div class="stat-content">
          <h3 class="stat-label">Total Locations</h3>
          <p class="stat-value" *ngIf="!loading">{{ stats.locations }}</p>
          <p class="stat-value skeleton" *ngIf="loading">---</p>
          
        </div>
        <div class="stat-decoration"></div>
      </div>

    </div>

    <!-- Appointments & Recent Bookings Section -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
      
      <!-- Next Appointment Card -->
      <div class="card next-appointment-card lg:col-span-1">
        <div class="section-header">
          <h3 class="section-title">Next Appointment</h3>
        </div>
        
        <!-- Loading State -->
        <div *ngIf="loading" class="loading-state">
          <div class="spinner"></div>
          <p>Loading appointment...</p>
        </div>

        <!-- Empty State -->
        <div *ngIf="!loading && !nextAppointment" class="empty-state">
          <div class="empty-icon">‚è≥</div>
          <h4>No Upcoming Appointments</h4>
          <p>Check back later for your next booking</p>
        </div>

        <!-- Appointment Details -->
        <div *ngIf="!loading && nextAppointment" class="appointment-details">
          <div class="appointment-avatar">
            {{ getInitials(nextAppointment.customer) }}
          </div>
          <div class="appointment-info">
            <h4 class="customer-name">{{ nextAppointment.customer }}</h4>
            <p class="service-name">{{ nextAppointment.service }}</p>
            <p class="time">{{ nextAppointment.time }}</p>
            <p class="location">{{ nextAppointment.location }}</p>
          </div>
        </div>
      </div>

      <!-- Recent Bookings Card -->
      <div class="card recent-bookings-card lg:col-span-2">
        <div class="section-header">
          <h3 class="section-title">Recent Bookings</h3>
          <a routerLink="/salon-owner/booking" class="view-all-btn">
            <span>View All</span>
            <span class="arrow">‚Üí</span>
          </a>
        </div>

        <!-- Loading State -->
        <div *ngIf="loading" class="loading-state">
          <div class="spinner"></div>
          <p>Loading bookings...</p>
        </div>

        <!-- Empty State -->
        <div *ngIf="!loading && recentBookings.length === 0" class="empty-state">
          <div class="empty-icon">üìÖ</div>
          <h4>No Recent Bookings</h4>
          <p>Your booking history will appear here</p>
        </div>

        <!-- Bookings List -->
        <div *ngIf="!loading && recentBookings.length > 0" class="bookings-list">
          <div *ngFor="let booking of recentBookings; let i = index" 
               class="booking-item"
               [style.animation-delay]="(i * 0.1) + 's'">
            <div class="booking-left">
              <div class="booking-avatar">
                {{ getInitials(booking.customer) }}
              </div>
              <div class="booking-details">
                <h4 class="booking-customer">{{ booking.customer }}</h4>
                <p class="booking-service">{{ booking.service }}</p>
              </div>
            </div>
            <div class="booking-right">
              <span class="booking-date">{{ booking.date }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Salon Setup Status Section -->
    <div class="table-section">
      
      <div class="section-header">
        <div>
          <h3 class="section-title">Salon Setup Status</h3>
          <p class="section-subtitle">Complete your salon profile to unlock full features</p>
        </div>
        <button class="view-all-btn" (click)="openGuide()">
          <span>Setup Guide</span>
          <span class="arrow">‚Üí</span>
        </button>
      </div>

      <div *ngIf="loading" class="loading-state">
        <div class="spinner"></div>
        <p>Loading status...</p>
      </div>

      <div *ngIf="!loading" class="status-grid">
        <div class="status-item" [class.complete]="status.info">
          <div class="status-icon">üìã</div>
          <h4>Salon Info</h4>
          <p>Basic salon details and contact information</p>
          <span class="status-indicator">{{ status.info ? 'Complete' : 'Pending' }}</span>
        </div>

        <div class="status-item" [class.complete]="status.services">
          <div class="status-icon">üíá‚Äç‚ôÄÔ∏è</div>
          <h4>Services Added</h4>
          <p>Add your salon services and pricing</p>
          <span class="status-indicator">{{ status.services ? 'Complete' : 'Pending' }}</span>
        </div>

        <div class="status-item" [class.complete]="status.locations">
          <div class="status-icon">üìç</div>
          <h4>Locations Added</h4>
          <p>Set up your salon branches or locations</p>
          <span class="status-indicator">{{ status.locations ? 'Complete' : 'Pending' }}</span>
        </div>
      </div>

    </div>

  </div>

  <!-- Setup Guide Modal -->
  <div class="modal-overlay" *ngIf="showGuideModal" (click)="closeGuide()">
    <div class="modal-content guide-modal" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <span class="modal-icon">üõ†Ô∏è</span>
        <h3>Salon Owner Setup Guide</h3>
      </div>
      <div class="modal-body">
        <p>Welcome to your salon dashboard! Follow these steps to get started and explore all features:</p>
        <ol class="guide-steps">
          <li>
            <strong>Add Services:</strong> Go to <a routerLink="/salon-owner/services">Services</a> to list your offerings like haircuts, coloring, etc., with prices and durations.
          </li>
          <li>
            <strong>Set Up Locations:</strong> If you have multiple branches, manage them in <a routerLink="/salon-owner/locations">Locations</a> to enable multi-location bookings.
          </li>
          <li>
            <strong>Explore Bookings:</strong> View and manage appointments in <a routerLink="/salon-owner/booking">Bookings</a>. Set availability and handle cancellations.
          </li>
          <li>
            <strong>Analytics & Reports:</strong> Check performance insights in <a>Analytics</a> to grow your business.
          </li>
        </ol>
        <p class="guide-note">Once setup is complete, you'll unlock advanced features like online payments and customer notifications. Need help? Contact support!  üëá rohit.kishul@Gmail.com, Mobile No - 9766198212   </p>
      </div>
      <div class="modal-footer">
        <button class="modal-btn cancel" (click)="closeGuide()">Got It!</button>
      </div>
    </div>
  </div>

</div>